<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coinley API Documentation - Developer Integration Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .code-block {
            background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
        }

        .gradient-text {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .network-card {
            transition: all 0.3s ease;
        }

        .network-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .sticky-nav {
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .step-badge {
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .flow-arrow {
            color: #9ca3af;
            font-size: 2rem;
            text-align: center;
        }
    </style>
</head>

<body class="bg-white text-gray-900">
    <!-- Header -->
    <header class="sticky-nav bg-white border-b border-gray-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 rounded-lg flex items-center justify-center">
                        <img src="./Logomark.png" alt="Coinley" />
                    </div>
                    <h1 class="text-xl font-bold">Coinley API</h1>
                </div>
                <nav class="hidden md:flex space-x-8">
                    <a href="#overview" class="text-gray-600 hover:text-blue-600 transition-colors">Overview</a>
                    <a href="#payment-flow" class="text-gray-600 hover:text-blue-600 transition-colors">Payment Flow</a>
                    <a href="#integration" class="text-gray-600 hover:text-blue-600 transition-colors">Integration</a>
                    <a href="#live-example" class="text-gray-600 hover:text-blue-600 transition-colors">Live Example</a>
                    <a href="#api-reference" class="text-gray-600 hover:text-blue-600 transition-colors">API Reference</a>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="bg-gradient-to-br from-blue-50 to-purple-50 py-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-5xl font-bold gradient-text mb-6">
                Accept Crypto Payments
                <span class="block mt-2">With Zero Blockchain Knowledge</span>
            </h1>
            <p class="text-xl text-gray-600 mb-8 max-w-3xl mx-auto">
                Coinley handles all the complexity of cryptocurrency payments. You just call our API.
                Automatic fee splitting, multi-wallet support, and real-time verification included.
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="#payment-flow"
                    class="bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-lg font-semibold hover:shadow-lg transition-all">
                    How It Works
                </a>
                <a href="#live-example"
                    class="border-2 border-gray-300 text-gray-700 px-8 py-3 rounded-lg font-semibold hover:border-blue-500 hover:text-blue-600 transition-all">
                    View Live Demo
                </a>
            </div>
        </div>
    </section>

    <!-- What is Coinley Section -->
    <section id="overview" class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl font-bold text-center mb-12">What is Coinley?</h2>

            <div class="grid md:grid-cols-2 gap-8 mb-12">
                <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-xl p-6 border border-blue-200">
                    <div class="w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center mb-4">
                        <i class="fas fa-rocket text-white text-xl"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-3">For Developers</h3>
                    <p class="text-gray-700 mb-4">
                        Coinley is a payment processor API that lets you accept cryptocurrency payments (USDT, USDC, etc.)
                        without learning blockchain development, smart contracts, or Web3.
                    </p>
                    <ul class="space-y-2 text-sm text-gray-700">
                        <li><i class="fas fa-check-circle text-green-600 mr-2"></i>No blockchain experience needed</li>
                        <li><i class="fas fa-check-circle text-green-600 mr-2"></i>Simple REST API integration</li>
                        <li><i class="fas fa-check-circle text-green-600 mr-2"></i>Automatic smart contract interaction</li>
                        <li><i class="fas fa-check-circle text-green-600 mr-2"></i>Built-in payment verification</li>
                    </ul>
                </div>

                <div class="bg-gradient-to-br from-purple-50 to-purple-100 rounded-xl p-6 border border-purple-200">
                    <div class="w-12 h-12 bg-purple-600 rounded-lg flex items-center justify-center mb-4">
                        <i class="fas fa-users text-white text-xl"></i>
                    </div>
                    <h3 class="text-xl font-bold mb-3">For Your Customers</h3>
                    <p class="text-gray-700 mb-4">
                        Your customers connect their crypto wallet (MetaMask, Coinbase Wallet, etc.),
                        approve the transaction, and payment is processed automatically.
                    </p>
                    <ul class="space-y-2 text-sm text-gray-700">
                        <li><i class="fas fa-wallet text-blue-600 mr-2"></i>Works with any Web3 wallet</li>
                        <li><i class="fas fa-lock text-blue-600 mr-2"></i>Secure, non-custodial payments</li>
                        <li><i class="fas fa-bolt text-blue-600 mr-2"></i>Instant settlement</li>
                        <li><i class="fas fa-globe text-blue-600 mr-2"></i>Supports 8+ blockchain networks</li>
                    </ul>
                </div>
            </div>

            <div class="bg-green-50 border border-green-200 rounded-lg p-6 max-w-4xl mx-auto">
                <h3 class="text-lg font-semibold text-green-900 mb-3">
                    <i class="fas fa-lightbulb mr-2"></i>
                    Real-World Example: SportsPass Ticket Sales
                </h3>
                <p class="text-green-800 mb-4">
                    This documentation uses <strong>SportsPass</strong> - a live ticket sales platform built with Coinley -
                    as the primary example. You'll see exactly how a production application integrates crypto payments
                    without any blockchain expertise required.
                </p>
                <a href="#live-example" class="text-green-700 font-semibold hover:underline">
                    → View the complete SportsPass implementation
                </a>
            </div>
        </div>
    </section>

    <!-- Payment Flow Overview -->
    <section id="payment-flow" class="py-16 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl font-bold text-center mb-4">Understanding Coinley's Payment Flow</h2>
            <p class="text-center text-gray-600 mb-12 max-w-3xl mx-auto">
                Here's exactly what happens when a customer pays with cryptocurrency using Coinley.
                We handle the blockchain complexity - you just call our API.
            </p>

            <!-- Visual Flow Diagram -->
            <div class="grid md:grid-cols-5 gap-4 mb-16">
                <div class="text-center">
                    <div class="step-badge bg-blue-100 text-blue-600 mx-auto mb-3">1</div>
                    <h4 class="font-semibold mb-2">Create Payment</h4>
                    <p class="text-sm text-gray-600">Your backend calls Coinley API to create payment request</p>
                </div>
                <div class="flow-arrow flex items-center justify-center">
                    <i class="fas fa-arrow-right"></i>
                </div>
                <div class="text-center">
                    <div class="step-badge bg-purple-100 text-purple-600 mx-auto mb-3">2</div>
                    <h4 class="font-semibold mb-2">Connect Wallet</h4>
                    <p class="text-sm text-gray-600">Customer connects MetaMask/Coinbase Wallet to your site</p>
                </div>
                <div class="flow-arrow flex items-center justify-center">
                    <i class="fas fa-arrow-right"></i>
                </div>
                <div class="text-center">
                    <div class="step-badge bg-green-100 text-green-600 mx-auto mb-3">3</div>
                    <h4 class="font-semibold mb-2">Execute & Verify</h4>
                    <p class="text-sm text-gray-600">Payment executes via smart contract, Coinley verifies on-chain</p>
                </div>
            </div>

            <!-- Detailed Flow Steps -->
            <div class="space-y-6">
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                    <div class="flex items-start space-x-4">
                        <div class="step-badge bg-blue-500 text-white flex-shrink-0">1</div>
                        <div class="flex-1">
                            <h3 class="text-xl font-bold mb-3">Step 1: Create Payment Request</h3>
                            <p class="text-gray-700 mb-4">
                                Your backend calls <code class="bg-gray-100 px-2 py-1 rounded text-sm">POST /api/payments/create</code>
                                with payment details (amount, currency, network). Coinley returns:
                            </p>
                            <ul class="space-y-2 text-sm text-gray-700 ml-4">
                                <li><i class="fas fa-check text-green-600 mr-2"></i><strong>Payment ID:</strong> Unique identifier for this transaction</li>
                                <li><i class="fas fa-check text-green-600 mr-2"></i><strong>Smart Contract Address:</strong> Where payment will be sent</li>
                                <li><i class="fas fa-check text-green-600 mr-2"></i><strong>Fee Split Details:</strong> Merchant (97%) + Coinley (3%) wallets and percentages</li>
                                <li><i class="fas fa-check text-green-600 mr-2"></i><strong>Token Details:</strong> Contract address and decimals for the selected currency</li>
                            </ul>
                            <div class="mt-4 code-block rounded-lg p-3">
                                <code class="text-green-400 text-xs">
                                    POST /api/payments/create → Returns payment contract details
                                </code>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                    <div class="flex items-start space-x-4">
                        <div class="step-badge bg-purple-500 text-white flex-shrink-0">2</div>
                        <div class="flex-1">
                            <h3 class="text-xl font-bold mb-3">Step 2: Connect Wallet & Switch Network</h3>
                            <p class="text-gray-700 mb-4">
                                Your frontend uses Web3.js to connect the customer's crypto wallet and switch to the correct blockchain network:
                            </p>
                            <div class="grid md:grid-cols-2 gap-4 mb-4">
                                <div class="bg-purple-50 rounded-lg p-4 border border-purple-200">
                                    <h4 class="font-semibold mb-2 text-purple-900">
                                        <i class="fas fa-wallet mr-2"></i>Connect Wallet
                                    </h4>
                                    <p class="text-sm text-purple-800">
                                        Use <code class="bg-purple-100 px-1 rounded">window.ethereum.request()</code> to
                                        connect MetaMask, Coinbase Wallet, or any Web3 wallet.
                                    </p>
                                </div>
                                <div class="bg-blue-50 rounded-lg p-4 border border-blue-200">
                                    <h4 class="font-semibold mb-2 text-blue-900">
                                        <i class="fas fa-network-wired mr-2"></i>Switch Network
                                    </h4>
                                    <p class="text-sm text-blue-800">
                                        Use <code class="bg-blue-100 px-1 rounded">wallet_switchEthereumChain</code> to
                                        switch to Polygon, BSC, Optimism, etc.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                    <div class="flex items-start space-x-4">
                        <div class="step-badge bg-green-500 text-white flex-shrink-0">3</div>
                        <div class="flex-1">
                            <h3 class="text-xl font-bold mb-3">Step 3: Execute Payment Transaction</h3>
                            <p class="text-gray-700 mb-4">
                                The customer approves and executes the payment. Coinley uses smart contracts to automatically split funds:
                            </p>
                            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4">
                                <h4 class="font-semibold text-yellow-900 mb-2">
                                    <i class="fas fa-info-circle mr-2"></i>Why Two Wallet Popups?
                                </h4>
                                <p class="text-sm text-yellow-800 mb-3">
                                    Customers will see two MetaMask popups. This is normal and required for ERC20 token payments:
                                </p>
                                <ol class="space-y-2 text-sm text-yellow-800">
                                    <li><strong>1. Approve Transaction:</strong> Give the smart contract permission to spend tokens (security feature)</li>
                                    <li><strong>2. Execute Payment:</strong> The smart contract transfers tokens and splits them automatically</li>
                                </ol>
                            </div>
                            <div class="grid md:grid-cols-3 gap-3 text-center text-sm">
                                <div class="bg-gray-50 rounded-lg p-3 border">
                                    <div class="font-bold text-blue-600 text-lg mb-1">97%</div>
                                    <div class="text-gray-700">Goes to your wallet</div>
                                </div>
                                <div class="bg-gray-50 rounded-lg p-3 border">
                                    <div class="font-bold text-purple-600 text-lg mb-1">3%</div>
                                    <div class="text-gray-700">Coinley platform fee</div>
                                </div>
                                <div class="bg-gray-50 rounded-lg p-3 border">
                                    <div class="font-bold text-green-600 text-lg mb-1">100%</div>
                                    <div class="text-gray-700">Automatic split</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                    <div class="flex items-start space-x-4">
                        <div class="step-badge bg-orange-500 text-white flex-shrink-0">4</div>
                        <div class="flex-1">
                            <h3 class="text-xl font-bold mb-3">Step 4: Verify Payment On-Chain</h3>
                            <p class="text-gray-700 mb-4">
                                After the customer completes payment, your frontend sends the transaction hash to Coinley.
                                We verify the payment on the blockchain and update the payment status:
                            </p>
                            <ul class="space-y-2 text-sm text-gray-700 ml-4">
                                <li><i class="fas fa-check text-green-600 mr-2"></i>Verify transaction exists on blockchain</li>
                                <li><i class="fas fa-check text-green-600 mr-2"></i>Confirm correct amount was sent</li>
                                <li><i class="fas fa-check text-green-600 mr-2"></i>Validate correct recipient addresses</li>
                                <li><i class="fas fa-check text-green-600 mr-2"></i>Mark payment as completed</li>
                            </ul>
                            <div class="mt-4 code-block rounded-lg p-3">
                                <code class="text-green-400 text-xs">
                                    POST /api/payments/process → Verifies transaction on-chain
                                </code>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mt-12 bg-gradient-to-br from-green-50 to-green-100 rounded-xl p-8 border border-green-200">
                <h3 class="text-2xl font-bold text-green-900 mb-4 text-center">
                    <i class="fas fa-magic mr-2"></i>That's It!
                </h3>
                <p class="text-green-800 text-center mb-4">
                    Coinley handles all the blockchain complexity: smart contract deployment, fee splitting,
                    network configuration, gas optimization, and payment verification. You just make API calls.
                </p>
                <div class="text-center">
                    <a href="#integration" class="inline-block bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition-all">
                        Start Building →
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Supported Networks -->
    <section class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl font-bold text-center mb-4">Supported Networks & Stablecoins</h2>
            <p class="text-center text-gray-600 mb-12">Accept USDT, USDC, and other stablecoins across 8 major blockchains</p>

            <div class="grid grid-cols-2 md:grid-cols-4 lg:grid-cols-8 gap-6">
                <div class="network-card bg-white rounded-xl p-4 text-center shadow-sm border border-gray-200">
                    <div class="w-12 h-12 bg-blue-100 rounded-lg mx-auto mb-3 flex items-center justify-center">
                        <i class="fab fa-ethereum text-blue-600 text-xl"></i>
                    </div>
                    <h3 class="font-semibold text-sm">Ethereum</h3>
                    <p class="text-xs text-red-500 mt-1 font-semibold">High fees</p>
                </div>
                <div class="network-card bg-white rounded-xl p-4 text-center shadow-sm border-2 border-green-400">
                    <div class="w-12 h-12 bg-purple-100 rounded-lg mx-auto mb-3 flex items-center justify-center">
                        <i class="fas fa-circle text-purple-600 text-xl"></i>
                    </div>
                    <h3 class="font-semibold text-sm">Polygon</h3>
                    <p class="text-xs text-green-600 mt-1 font-semibold">~$0.01 fees</p>
                </div>
                <div class="network-card bg-white rounded-xl p-4 text-center shadow-sm border-2 border-green-400">
                    <div class="w-12 h-12 bg-yellow-100 rounded-lg mx-auto mb-3 flex items-center justify-center">
                        <i class="fas fa-coins text-yellow-600 text-xl"></i>
                    </div>
                    <h3 class="font-semibold text-sm">BSC</h3>
                    <p class="text-xs text-green-600 mt-1 font-semibold">~$0.02 fees</p>
                </div>
                <div class="network-card bg-white rounded-xl p-4 text-center shadow-sm border border-gray-200">
                    <div class="w-12 h-12 bg-blue-100 rounded-lg mx-auto mb-3 flex items-center justify-center">
                        <i class="fas fa-cube text-blue-600 text-xl"></i>
                    </div>
                    <h3 class="font-semibold text-sm">Base</h3>
                    <p class="text-xs text-green-600 mt-1">~$0.03 fees</p>
                </div>
                <div class="network-card bg-white rounded-xl p-4 text-center shadow-sm border border-gray-200">
                    <div class="w-12 h-12 bg-red-100 rounded-lg mx-auto mb-3 flex items-center justify-center">
                        <i class="fas fa-fire text-red-600 text-xl"></i>
                    </div>
                    <h3 class="font-semibold text-sm">Optimism</h3>
                    <p class="text-xs text-yellow-600 mt-1 font-semibold">~$0.60 fees</p>
                </div>
                <div class="network-card bg-white rounded-xl p-4 text-center shadow-sm border border-gray-200">
                    <div class="w-12 h-12 bg-blue-100 rounded-lg mx-auto mb-3 flex items-center justify-center">
                        <i class="fas fa-mountain text-blue-600 text-xl"></i>
                    </div>
                    <h3 class="font-semibold text-sm">Arbitrum</h3>
                    <p class="text-xs text-yellow-600 mt-1">~$0.50 fees</p>
                </div>
                <div class="network-card bg-white rounded-xl p-4 text-center shadow-sm border border-gray-200">
                    <div class="w-12 h-12 bg-red-100 rounded-lg mx-auto mb-3 flex items-center justify-center">
                        <i class="fas fa-snowflake text-red-600 text-xl"></i>
                    </div>
                    <h3 class="font-semibold text-sm">Avalanche</h3>
                    <p class="text-xs text-gray-500 mt-1">Low fees</p>
                </div>
                <div class="network-card bg-white rounded-xl p-4 text-center shadow-sm border border-gray-200">
                    <div class="w-12 h-12 bg-purple-100 rounded-lg mx-auto mb-3 flex items-center justify-center">
                        <i class="fas fa-bolt text-purple-600 text-xl"></i>
                    </div>
                    <h3 class="font-semibold text-sm">Solana</h3>
                    <p class="text-xs text-gray-500 mt-1">Coming soon</p>
                </div>
            </div>

            <div class="mt-8 bg-green-50 border border-green-200 rounded-lg p-4 max-w-2xl mx-auto">
                <p class="text-sm text-green-800 text-center">
                    <i class="fas fa-lightbulb mr-2"></i>
                    <strong>Pro Tip:</strong> Use Polygon or BSC for transactions under $100 to minimize gas fees (~$0.01 vs $3-5 on Ethereum/Optimism)
                </p>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <div id="integration" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
        <div class="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <!-- Sidebar -->
            <div class="lg:col-span-1">
                <nav class="sticky top-24 space-y-2">
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h3 class="font-semibold text-gray-900 mb-3">Quick Navigation</h3>
                        <ul class="space-y-2 text-sm">
                            <li><a href="#prerequisites" class="text-gray-600 hover:text-blue-600 transition-colors">Prerequisites</a></li>
                            <li><a href="#config" class="text-gray-600 hover:text-blue-600 transition-colors">Configuration</a></li>
                            <li><a href="#step1" class="text-gray-600 hover:text-blue-600 transition-colors">Step 1: Create Payment</a></li>
                            <li><a href="#step2" class="text-gray-600 hover:text-blue-600 transition-colors">Step 2: Connect Wallet</a></li>
                            <li><a href="#step3" class="text-gray-600 hover:text-blue-600 transition-colors">Step 3: Execute Payment</a></li>
                            <li><a href="#step4" class="text-gray-600 hover:text-blue-600 transition-colors">Step 4: Verify Payment</a></li>
                            <li><a href="#balance-check" class="text-gray-600 hover:text-blue-600 transition-colors">Balance Validation</a></li>
                            <li><a href="#gas-optimization" class="text-gray-600 hover:text-blue-600 transition-colors">Gas Optimization</a></li>
                            <li><a href="#error-handling" class="text-gray-600 hover:text-blue-600 transition-colors">Error Handling</a></li>
                            <li><a href="#live-example" class="text-gray-600 hover:text-blue-600 transition-colors">Complete Example</a></li>
                            <li><a href="#api-reference" class="text-gray-600 hover:text-blue-600 transition-colors">API Reference</a></li>
                        </ul>
                    </div>
                </nav>
            </div>

            <!-- Content -->
            <div class="lg:col-span-3 space-y-12">
                <!-- Prerequisites -->
                <section id="prerequisites">
                    <h2 class="text-3xl font-bold mb-6">Prerequisites</h2>
                    <div class="bg-white border border-gray-200 rounded-lg p-6 mb-6">
                        <ul class="space-y-3 text-gray-700">
                            <li class="flex items-start">
                                <i class="fas fa-key text-blue-600 mr-3 mt-1"></i>
                                <div>
                                    <strong>Coinley API Credentials</strong>
                                    <p class="text-sm text-gray-600">Sign up at Coinley to get your API key and secret</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-code text-blue-600 mr-3 mt-1"></i>
                                <div>
                                    <strong>Basic JavaScript/HTML Knowledge</strong>
                                    <p class="text-sm text-gray-600">You don't need blockchain experience</p>
                                </div>
                            </li>
                            <li class="flex items-start">
                                <i class="fas fa-wallet text-blue-600 mr-3 mt-1"></i>
                                <div>
                                    <strong>Web3 Libraries</strong>
                                    <p class="text-sm text-gray-600">We'll use Web3.js (auto-loaded from CDN) and Axios</p>
                                </div>
                            </li>
                        </ul>
                    </div>

                    <h3 class="text-xl font-semibold mb-4">Installation</h3>
                    <div class="code-block rounded-lg p-4 mb-6">
                        <pre class="text-gray-300"><code>&lt;!-- Include required libraries in your HTML --&gt;
&lt;script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"&gt;&lt;/script&gt;
&lt;script src="https://cdn.jsdelivr.net/npm/web3@1.10.0/dist/web3.min.js"&gt;&lt;/script&gt;</code></pre>
                    </div>
                </section>

                <!-- Configuration -->
                <section id="config">
                    <h2 class="text-3xl font-bold mb-6">Configuration</h2>
                    <p class="text-gray-600 mb-6">
                        Set up your Coinley API credentials. Keep these secure on your backend.
                    </p>

                    <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
                        <div class="flex items-start">
                            <i class="fas fa-exclamation-triangle text-red-600 mr-3 mt-1"></i>
                            <div>
                                <h4 class="font-semibold text-red-900">Security Warning</h4>
                                <p class="text-red-800 text-sm">In production, store API credentials on your backend.
                                    The frontend should call your backend API, not Coinley directly.</p>
                            </div>
                        </div>
                    </div>

                    <div class="code-block rounded-lg p-4 mb-6">
                        <pre class="text-gray-300"><code>// Coinley Configuration
const COINLEY_CONFIG = {
    baseURL: 'https://talented-mercy-production.up.railway.app',
    apiKey: 'your_api_key_here',
    apiSecret: 'your_api_secret_here'
};

// Store cart and payment state
let cart = [];
let currentPayment = null;
let web3 = null;
let userAccount = null;
let availableNetworks = [];
let networkTokens = {};</code></pre>
                    </div>

                    <h3 class="text-xl font-semibold mb-4">Load Available Networks & Tokens</h3>
                    <p class="text-gray-600 mb-4">
                        Fetch the list of supported blockchain networks and their tokens from Coinley:
                    </p>
                    <div class="code-block rounded-lg p-4">
                        <pre class="text-gray-300"><code>async function loadNetworks() {
    const response = await axios.get(`${COINLEY_CONFIG.baseURL}/api/networks`, {
        headers: {
            'X-API-Key': COINLEY_CONFIG.apiKey,
            'X-API-Secret': COINLEY_CONFIG.apiSecret
        }
    });

    availableNetworks = response.data.networks.filter(n => !n.isTestnet);

    // Sort networks by cost-effectiveness
    const sortedNetworks = availableNetworks.sort((a, b) => {
        const costRanking = {
            'polygon': 1, 'bsc': 2, 'base': 3,
            'arbitrum': 4, 'optimism': 5, 'ethereum': 7
        };
        return (costRanking[a.shortName] || 99) - (costRanking[b.shortName] || 99);
    });

    // Populate network dropdown
    const networkSelect = document.getElementById('paymentNetwork');
    networkSelect.innerHTML = sortedNetworks.map(network => {
        const costIndicator = network.shortName === 'polygon' || network.shortName === 'bsc'
            ? ' 💚 (Low fees)' : network.shortName === 'optimism' ? ' ⚠️ (Higher fees)' : '';
        return `&lt;option value="${network.shortName}"&gt;${network.name}${costIndicator}&lt;/option&gt;`;
    }).join('');
}

async function loadTokensForNetwork(networkShortName) {
    const network = availableNetworks.find(n => n.shortName === networkShortName);

    const response = await axios.get(
        `${COINLEY_CONFIG.baseURL}/api/networks/${network.id}/tokens`,
        {
            headers: {
                'X-API-Key': COINLEY_CONFIG.apiKey,
                'X-API-Secret': COINLEY_CONFIG.apiSecret
            }
        }
    );

    networkTokens[networkShortName] = response.data.tokens;

    // Populate currency dropdown
    const currencySelect = document.getElementById('paymentCurrency');
    currencySelect.innerHTML = response.data.tokens.map(token =>
        `&lt;option value="${token.symbol}"&gt;${token.symbol} - ${token.name}&lt;/option&gt;`
    ).join('');
}</code></pre>
                    </div>
                </section>

                <!-- Step 1: Create Payment -->
                <section id="step1">
                    <h2 class="text-3xl font-bold mb-6">Step 1: Create Payment</h2>
                    <p class="text-gray-600 mb-6">
                        Call the Coinley API to create a payment request. You'll get back smart contract details and fee split configuration.
                    </p>

                    <div class="bg-green-50 border-l-4 border-green-400 p-4 mb-6">
                        <div class="flex">
                            <span class="bg-green-500 text-white px-3 py-1 rounded text-sm font-mono mr-4">POST</span>
                            <code class="text-green-800 font-mono">/api/payments/create</code>
                        </div>
                    </div>

                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6">
                        <h4 class="font-semibold text-blue-900 mb-2">
                            <i class="fas fa-info-circle mr-2"></i>SportsPass Example
                        </h4>
                        <p class="text-blue-800 text-sm">
                            In the SportsPass ticket platform, this function is called when a customer clicks "Connect MetaMask & Pay"
                            with items in their cart. It creates a payment for the total cart value.
                        </p>
                    </div>

                    <div class="code-block rounded-lg p-4 mb-6">
                        <pre class="text-gray-300"><code>async function connectMetaMaskAndPay() {
    const email = document.getElementById('customerEmail').value;
    const network = document.getElementById('paymentNetwork').value;
    const currency = document.getElementById('paymentCurrency').value;

    if (!email || cart.length === 0) {
        alert('Please enter your email and add items to cart');
        return;
    }

    const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);

    // Create payment via Coinley API
    const response = await axios.post(
        `${COINLEY_CONFIG.baseURL}/api/payments/create`,
        {
            amount: total.toFixed(2),        // e.g., "19.99"
            currency: currency,               // e.g., "USDT"
            network: network,                 // e.g., "polygon"
            customerEmail: email,
            orderId: `TICKET_${Date.now()}`,
            metadata: {
                tickets: cart,
                platform: 'SportsPass'
            }
        },
        {
            headers: {
                'X-API-Key': COINLEY_CONFIG.apiKey,
                'X-API-Secret': COINLEY_CONFIG.apiSecret,
                'Content-Type': 'application/json'
            }
        }
    );

    if (response.data.success) {
        currentPayment = response.data.payment;
        console.log('Payment created:', currentPayment);
        // Continue to wallet connection...
    }
}</code></pre>
                    </div>

                    <h3 class="text-xl font-semibold mb-4">What You Get Back</h3>
                    <div class="code-block rounded-lg p-4 mb-6">
                        <pre class="text-gray-300"><code>{
  "success": true,
  "payment": {
    "id": "21870d6e-d53d-4e72-8761-e0208a8ceacb",
    "amount": "19.99",
    "currency": "USDT",
    "network": "polygon",
    "status": "pending",
    "contractAddress": "0x48E967d182F744EdB18AcA7092814f1FE17fcB2d",
    "splitterPaymentId": "21870d6e-d53d-4e72-8761-e0208a8ceacb",
    "merchantWallet": "0x9d961e093FFeC1577d124Cfe65233fE140E88Fc4",
    "coinleyWallet": "0xEe9025Cc02c060C03ba5dba3d19C7ea2e752f44d",
    "merchantPercentage": 9700,  // 97%
    "coinleyPercentage": 300,    // 3%
    "expiresAt": "2025-10-15T14:30:00.000Z"
  }
}</code></pre>
                    </div>

                    <div class="bg-purple-50 border border-purple-200 rounded-lg p-4">
                        <p class="text-purple-800 text-sm">
                            <i class="fas fa-magic mr-2"></i>
                            <strong>What's happening:</strong> Coinley creates a unique payment ID and tells you which smart contract to use.
                            The contract will automatically split funds 97% to you, 3% to Coinley.
                        </p>
                    </div>
                </section>

                <!-- Step 2: Connect Wallet -->
                <section id="step2">
                    <h2 class="text-3xl font-bold mb-6">Step 2: Connect Wallet & Switch Network</h2>
                    <p class="text-gray-600 mb-6">
                        Connect the user's crypto wallet (MetaMask, Coinbase Wallet, etc.) and switch to the correct blockchain network.
                    </p>

                    <h3 class="text-xl font-semibold mb-4">Connect Wallet</h3>
                    <div class="code-block rounded-lg p-4 mb-6">
                        <pre class="text-gray-300"><code>async function connectWallet() {
    // Check if user has a Web3 wallet installed
    if (typeof window.ethereum === 'undefined') {
        alert('Please install MetaMask or another Web3 wallet');
        window.open('https://metamask.io/download/', '_blank');
        return;
    }

    // Initialize Web3
    web3 = new Web3(window.ethereum);

    // Request account access
    const accounts = await window.ethereum.request({
        method: 'eth_requestAccounts'
    });

    if (!accounts || accounts.length === 0) {
        throw new Error('No wallet accounts found');
    }

    userAccount = accounts[0];
    console.log('Connected wallet:', userAccount);
    return userAccount;
}</code></pre>
                    </div>

                    <h3 class="text-xl font-semibold mb-4">Switch to Correct Network</h3>
                    <p class="text-gray-600 mb-4">
                        Ensure the customer's wallet is on the correct blockchain network for the payment:
                    </p>
                    <div class="code-block rounded-lg p-4 mb-6">
                        <pre class="text-gray-300"><code>async function switchToNetwork(networkShortName) {
    const network = availableNetworks.find(n => n.shortName === networkShortName);
    if (!network) throw new Error('Network not found');

    // Convert chainId to hex format (required by MetaMask)
    const chainIdHex = '0x' + parseInt(network.chainId).toString(16);

    try {
        // Ask wallet to switch networks
        await window.ethereum.request({
            method: 'wallet_switchEthereumChain',
            params: [{ chainId: chainIdHex }]
        });

        console.log(`Switched to ${network.name}`);
    } catch (error) {
        if (error.code === 4902) {
            // Network not added to wallet yet
            alert(`Please add ${network.name} to your wallet manually`);
        }
        throw error;
    }
}</code></pre>
                    </div>

                    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                        <p class="text-yellow-800 text-sm">
                            <i class="fas fa-lightbulb mr-2"></i>
                            <strong>User Experience:</strong> The wallet will show a popup asking the user to switch networks.
                            This is automatic - you don't need to worry about network configurations.
                        </p>
                    </div>
                </section>

                <!-- Balance Check Section -->
                <section id="balance-check">
                    <h2 class="text-3xl font-bold mb-6">Balance Validation (Critical!)</h2>
                    <p class="text-gray-600 mb-6">
                        Always check if the user has enough tokens BEFORE attempting payment. This prevents confusing blockchain errors.
                    </p>

                    <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
                        <div class="flex items-start">
                            <i class="fas fa-exclamation-circle text-red-600 mr-3 mt-1"></i>
                            <div>
                                <h4 class="font-semibold text-red-900">Common Error</h4>
                                <p class="text-red-800 text-sm mb-2">
                                    "ERC20: transfer amount exceeds balance" means the user doesn't have enough tokens.
                                </p>
                                <p class="text-red-800 text-sm">
                                    <strong>Solution:</strong> Check balance first and show a friendly error message before attempting payment.
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="code-block rounded-lg p-4 mb-6">
                        <pre class="text-gray-300"><code>async function checkTokenBalance(tokenAddress, requiredAmount, decimals) {
    // ERC20 standard ABI for balanceOf
    const erc20ABI = [{
        "constant": true,
        "inputs": [{"name": "_owner", "type": "address"}],
        "name": "balanceOf",
        "outputs": [{"name": "balance", "type": "uint256"}],
        "type": "function"
    }];

    const tokenContract = new web3.eth.Contract(erc20ABI, tokenAddress);

    // Get user's token balance
    const balanceWei = await tokenContract.methods
        .balanceOf(userAccount)
        .call();

    // Convert to decimal (e.g., USDT uses 6 decimals)
    const balanceDecimal = parseFloat(balanceWei) / Math.pow(10, decimals);

    console.log(`Balance: ${balanceDecimal} | Required: ${requiredAmount}`);

    // Check if sufficient
    if (balanceDecimal < requiredAmount) {
        const shortfall = (requiredAmount - balanceDecimal).toFixed(2);
        throw new Error(
            `Insufficient balance!\n\n` +
            `Required: ${requiredAmount}\n` +
            `Available: ${balanceDecimal.toFixed(2)}\n` +
            `Shortfall: ${shortfall}\n\n` +
            `Please add more funds to your wallet.`
        );
    }

    return true;
}</code></pre>
                    </div>

                    <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                        <p class="text-green-800 text-sm">
                            <i class="fas fa-check-circle mr-2"></i>
                            <strong>Best Practice:</strong> Display the user's current balance in your UI so they know if they need to add funds.
                        </p>
                    </div>
                </section>

                <!-- Step 3: Execute Payment -->
                <section id="step3">
                    <h2 class="text-3xl font-bold mb-6">Step 3: Execute Payment</h2>
                    <p class="text-gray-600 mb-6">
                        Execute the smart contract payment. This involves two transactions: approve and pay.
                    </p>

                    <div class="bg-purple-50 border border-purple-200 rounded-lg p-6 mb-6">
                        <h3 class="text-lg font-semibold text-purple-900 mb-3">Why Two Transactions?</h3>
                        <ol class="text-purple-800 space-y-2 text-sm">
                            <li><strong>1. Approve:</strong> Give the smart contract permission to spend your tokens (ERC20 security standard)</li>
                            <li><strong>2. Pay:</strong> The contract transfers tokens and automatically splits payment to merchant + Coinley</li>
                        </ol>
                        <p class="text-purple-700 text-sm mt-3">
                            This is a security feature of ERC20 tokens - contracts can't take your tokens without explicit permission.
                        </p>
                    </div>

                    <h3 class="text-xl font-semibold mb-4">Complete Payment Function from SportsPass</h3>
                    <div class="code-block rounded-lg p-4 mb-6">
                        <pre class="text-gray-300 text-sm"><code>async function executePayment() {
    const networkShortName = currentPayment.network;
    const currency = currentPayment.currency;
    const tokenData = networkTokens[networkShortName].find(t => t.symbol === currency);

    const decimals = tokenData.decimals || 6;
    const amount = parseFloat(currentPayment.amount);
    const amountWei = (amount * Math.pow(10, decimals)).toString();

    // ERC20 Token ABI
    const erc20ABI = [
        {
            "constant": false,
            "inputs": [
                {"name": "_spender", "type": "address"},
                {"name": "_value", "type": "uint256"}
            ],
            "name": "approve",
            "outputs": [{"name": "", "type": "bool"}],
            "type": "function"
        },
        {
            "constant": true,
            "inputs": [{"name": "_owner", "type": "address"}],
            "name": "balanceOf",
            "outputs": [{"name": "balance", "type": "uint256"}],
            "type": "function"
        }
    ];

    const tokenContract = new web3.eth.Contract(erc20ABI, tokenData.contractAddress);

    // ✅ CRITICAL: Check balance first
    const balance = await tokenContract.methods.balanceOf(userAccount).call();
    if (BigInt(balance) < BigInt(amountWei)) {
        throw new Error('Insufficient token balance');
    }

    // ✅ STEP 1: Approve token spending
    console.log('Requesting token approval...');
    const approveTx = await tokenContract.methods
        .approve(currentPayment.contractAddress, amountWei)
        .send({ from: userAccount });

    console.log('Approved! Tx:', approveTx.transactionHash);

    // ✅ STEP 2: Execute payment via splitter contract
    const splitterABI = [{
        "inputs": [{
            "components": [
                {"name": "token", "type": "address"},
                {"name": "amount", "type": "uint256"},
                {"name": "paymentId", "type": "string"},
                {"name": "recipient1", "type": "address"},
                {"name": "recipient2", "type": "address"},
                {"name": "recipient3", "type": "address"},
                {"name": "recipient1Percentage", "type": "uint256"},
                {"name": "recipient2Percentage", "type": "uint256"},
                {"name": "recipient3Percentage", "type": "uint256"}
            ],
            "name": "params",
            "type": "tuple"
        }],
        "name": "splitPayment",
        "outputs": [],
        "stateMutability": "nonpayable",
        "type": "function"
    }];

    const splitterContract = new web3.eth.Contract(
        splitterABI,
        currentPayment.contractAddress
    );

    const splitParams = {
        token: tokenData.contractAddress,
        amount: amountWei,
        paymentId: currentPayment.splitterPaymentId,
        recipient1: currentPayment.merchantWallet,
        recipient2: currentPayment.coinleyWallet,
        recipient3: '0x0000000000000000000000000000000000000000',
        recipient1Percentage: currentPayment.merchantPercentage,
        recipient2Percentage: currentPayment.coinleyPercentage,
        recipient3Percentage: 0
    };

    console.log('Executing payment...');
    const paymentTx = await splitterContract.methods
        .splitPayment(splitParams)
        .send({ from: userAccount });

    console.log('Payment successful! Tx:', paymentTx.transactionHash);

    // ✅ STEP 3: Verify payment with Coinley
    await verifyPayment(paymentTx.transactionHash);
}</code></pre>
                    </div>

                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <p class="text-blue-800 text-sm">
                            <i class="fas fa-info-circle mr-2"></i>
                            <strong>What happens:</strong> The wallet shows two popups - one to approve tokens, one to execute payment.
                            The smart contract automatically splits funds between merchant (97%) and Coinley (3%).
                        </p>
                    </div>
                </section>

                <!-- Step 4: Verify Payment -->
                <section id="step4">
                    <h2 class="text-3xl font-bold mb-6">Step 4: Verify Payment</h2>
                    <p class="text-gray-600 mb-6">
                        Send the transaction hash to Coinley for verification. We check the blockchain to confirm payment.
                    </p>

                    <div class="bg-green-50 border-l-4 border-green-400 p-4 mb-6">
                        <div class="flex">
                            <span class="bg-green-500 text-white px-3 py-1 rounded text-sm font-mono mr-4">POST</span>
                            <code class="text-green-800 font-mono">/api/payments/process</code>
                        </div>
                    </div>

                    <div class="code-block rounded-lg p-4 mb-6">
                        <pre class="text-gray-300"><code>async function verifyPayment(txHash) {
    const response = await axios.post(
        `${COINLEY_CONFIG.baseURL}/api/payments/process`,
        {
            paymentId: currentPayment.id,
            transactionHash: txHash,
            network: currentPayment.network,
            senderAddress: userAccount
        },
        {
            headers: {
                'X-API-Key': COINLEY_CONFIG.apiKey,
                'X-API-Secret': COINLEY_CONFIG.apiSecret,
                'Content-Type': 'application/json'
            }
        }
    );

    if (!response.data.success) {
        throw new Error(response.data.error || 'Verification failed');
    }

    console.log('Payment verified!', response.data);
}</code></pre>
                    </div>

                    <h3 class="text-xl font-semibold mb-4">Verification Response</h3>
                    <div class="code-block rounded-lg p-4 mb-6">
                        <pre class="text-gray-300"><code>{
  "success": true,
  "message": "Payment processed successfully",
  "payment": {
    "id": "21870d6e-d53d-4e72-8761-e0208a8ceacb",
    "status": "completed",
    "amount": "19.99",
    "transactionHash": "0xabcdef1234567890...",
    "senderAddress": "0x581c333..."
  },
  "onChainData": {
    "blockNumber": 18745123,
    "gasUsed": "65432",
    "confirmed": true
  }
}</code></pre>
                    </div>

                    <div class="bg-green-50 border border-green-200 rounded-lg p-4">
                        <p class="text-green-800 text-sm">
                            <i class="fas fa-shield-alt mr-2"></i>
                            <strong>What Coinley verifies:</strong> Transaction exists on blockchain, correct amount was sent,
                            correct recipients received funds, and fee split was executed correctly.
                        </p>
                    </div>
                </section>

                <!-- Gas Optimization -->
                <section id="gas-optimization">
                    <h2 class="text-3xl font-bold mb-6">Gas Fee Optimization</h2>
                    <p class="text-gray-600 mb-6">
                        Minimize transaction costs for your users with these strategies (as implemented in SportsPass).
                    </p>

                    <div class="grid md:grid-cols-2 gap-6 mb-8">
                        <div class="bg-green-50 border border-green-200 rounded-lg p-6">
                            <h3 class="text-lg font-semibold text-green-900 mb-3">✅ Low Fee Networks</h3>
                            <ul class="text-green-800 text-sm space-y-2">
                                <li><strong>Polygon:</strong> ~$0.01 per transaction</li>
                                <li><strong>BSC:</strong> ~$0.02 per transaction</li>
                                <li><strong>Base:</strong> ~$0.03 per transaction</li>
                            </ul>
                        </div>

                        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-6">
                            <h3 class="text-lg font-semibold text-yellow-900 mb-3">⚠️ Higher Fee Networks</h3>
                            <ul class="text-yellow-800 text-sm space-y-2">
                                <li><strong>Optimism:</strong> $0.50-$0.70 per transaction</li>
                                <li><strong>Arbitrum:</strong> $0.40-$0.60 per transaction</li>
                                <li><strong>Ethereum:</strong> $10-$30+ per transaction</li>
                            </ul>
                        </div>
                    </div>

                    <h3 class="text-xl font-semibold mb-4">Show Fee Warnings to Users</h3>
                    <p class="text-gray-600 mb-4">
                        SportsPass displays warnings when users select high-fee networks. Here's how:
                    </p>
                    <div class="code-block rounded-lg p-4 mb-6">
                        <pre class="text-gray-300"><code>// Show fee warning based on selected network
networkSelect.addEventListener('change', (e) => {
    const selectedNetwork = e.target.value;
    const networkWarning = document.getElementById('networkWarning');
    const highFeeNetworks = ['optimism', 'arbitrum', 'ethereum'];
    const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);

    if (highFeeNetworks.includes(selectedNetwork)) {
        let estimatedFee = 0;

        if (selectedNetwork === 'optimism') {
            estimatedFee = 0.61;
            networkWarning.innerHTML = `
                ⚠️ OPTIMISM ALERT: Expected fee ~$${estimatedFee}
                (${(estimatedFee / total * 100).toFixed(0)}% of transaction).
                Switch to Polygon for ~$0.01 fees.
            `;
        } else if (selectedNetwork === 'ethereum') {
            estimatedFee = 15;
            networkWarning.innerHTML = `
                🚨 ETHEREUM: Fees typically $10-20.
                DO NOT USE for small transactions! Use Polygon instead.
            `;
        }

        networkWarning.classList.remove('hidden');
    } else {
        networkWarning.classList.add('hidden');
    }
});</code></pre>
                    </div>

                    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                        <h4 class="font-semibold text-blue-900 mb-2">
                            <i class="fas fa-rocket mr-2"></i>Optimism/Arbitrum Direct Transfer Optimization
                        </h4>
                        <p class="text-blue-800 text-sm">
                            For Optimism and Arbitrum, SportsPass offers a "direct transfer" option that bypasses the splitter contract,
                            reducing fees by 90%. Set <code class="bg-blue-100 px-1 rounded">isDirectTransfer: true</code> when verifying payment.
                        </p>
                    </div>
                </section>

                <!-- Error Handling -->
                <section id="error-handling">
                    <h2 class="text-3xl font-bold mb-6">Error Handling</h2>
                    <p class="text-gray-600 mb-6">
                        Handle common errors gracefully to improve user experience.
                    </p>

                    <div class="space-y-4 mb-8">
                        <div class="bg-white border border-gray-200 rounded-lg p-4">
                            <h4 class="font-semibold mb-2">❌ "User rejected transaction"</h4>
                            <p class="text-sm text-gray-600 mb-2">User clicked "Reject" in wallet popup</p>
                            <div class="code-block rounded-lg p-3">
                                <code class="text-xs text-gray-300">Show: "Payment cancelled. No charges were made."</code>
                            </div>
                        </div>

                        <div class="bg-white border border-gray-200 rounded-lg p-4">
                            <h4 class="font-semibold mb-2">❌ "Insufficient funds"</h4>
                            <p class="text-sm text-gray-600 mb-2">User doesn't have enough tokens</p>
                            <div class="code-block rounded-lg p-3">
                                <code class="text-xs text-gray-300">Show: "Insufficient USDT balance. You need X more USDT."</code>
                            </div>
                        </div>

                        <div class="bg-white border border-gray-200 rounded-lg p-4">
                            <h4 class="font-semibold mb-2">❌ "Network mismatch"</h4>
                            <p class="text-sm text-gray-600 mb-2">User is on wrong blockchain network</p>
                            <div class="code-block rounded-lg p-3">
                                <code class="text-xs text-gray-300">Show: "Please switch to Polygon network in your wallet."</code>
                            </div>
                        </div>
                    </div>

                    <h3 class="text-xl font-semibold mb-4">Complete Error Handling</h3>
                    <div class="code-block rounded-lg p-4">
                        <pre class="text-gray-300"><code>try {
    await connectWallet();
    await switchToNetwork('polygon');
    await executePayment();
    alert('✅ Payment successful!');
} catch (error) {
    console.error('Payment error:', error);

    // User-friendly error messages
    if (error.message.includes('User denied')) {
        alert('Payment cancelled. No charges were made.');
    } else if (error.message.includes('Insufficient')) {
        alert(error.message); // Our custom balance error
    } else if (error.code === 4902) {
        alert('Please add this network to your wallet.');
    } else {
        alert('Payment failed: ' + error.message);
    }
}</code></pre>
                    </div>
                </section>

                <!-- Live Example -->
                <section id="live-example">
                    <h2 class="text-3xl font-bold mb-6">Complete Working Example: SportsPass</h2>
                    <p class="text-gray-600 mb-6">
                        Here's the complete ticket sales platform built with Coinley. This is a real, production-ready implementation.
                    </p>

                    <div class="bg-gradient-to-br from-blue-50 to-purple-50 border-2 border-blue-200 rounded-lg p-6 mb-6">
                        <h3 class="text-lg font-semibold mb-3">
                            <i class="fas fa-ticket-alt mr-2 text-blue-600"></i>
                            SportsPass: Crypto Ticket Sales Platform
                        </h3>
                        <p class="text-gray-700 mb-4">
                            A complete e-commerce platform for selling sports tickets with cryptocurrency payments.
                            Features include:
                        </p>
                        <ul class="grid md:grid-cols-2 gap-2 text-sm text-gray-700 mb-4">
                            <li><i class="fas fa-check-circle text-green-600 mr-2"></i>Shopping cart functionality</li>
                            <li><i class="fas fa-check-circle text-green-600 mr-2"></i>Multi-network support</li>
                            <li><i class="fas fa-check-circle text-green-600 mr-2"></i>Real-time balance checking</li>
                            <li><i class="fas fa-check-circle text-green-600 mr-2"></i>Gas fee warnings</li>
                            <li><i class="fas fa-check-circle text-green-600 mr-2"></i>Payment status tracking</li>
                            <li><i class="fas fa-check-circle text-green-600 mr-2"></i>Error handling</li>
                        </ul>
                        <a href="./index.html" target="_blank"
                           class="inline-block bg-blue-600 text-white px-6 py-2 rounded-lg font-semibold hover:bg-blue-700 transition-all">
                            <i class="fas fa-external-link-alt mr-2"></i>Open Live Demo
                        </a>
                        <a href="https://github.com/your-repo/sportspass" target="_blank"
                           class="inline-block ml-3 border-2 border-gray-300 text-gray-700 px-6 py-2 rounded-lg font-semibold hover:border-blue-500 transition-all">
                            <i class="fab fa-github mr-2"></i>View Source Code
                        </a>
                    </div>

                    <h3 class="text-xl font-semibold mb-4">Key Implementation Highlights</h3>
                    <div class="space-y-4">
                        <div class="bg-white border-l-4 border-blue-500 p-4">
                            <h4 class="font-semibold mb-2">1. Network Selection with Fee Indicators</h4>
                            <p class="text-sm text-gray-600 mb-2">
                                See <code class="bg-gray-100 px-1 rounded">loadNetworks()</code> function - Line 246
                            </p>
                            <p class="text-xs text-gray-500">
                                Automatically sorts networks by cost-effectiveness and shows visual fee indicators (💚 Low fees, ⚠️ Higher fees)
                            </p>
                        </div>

                        <div class="bg-white border-l-4 border-purple-500 p-4">
                            <h4 class="font-semibold mb-2">2. Dynamic Gas Fee Warnings</h4>
                            <p class="text-sm text-gray-600 mb-2">
                                See network change handler - Line 280
                            </p>
                            <p class="text-xs text-gray-500">
                                Calculates and displays estimated fees as a percentage of transaction value
                            </p>
                        </div>

                        <div class="bg-white border-l-4 border-green-500 p-4">
                            <h4 class="font-semibold mb-2">3. Optimism Direct Transfer Optimization</h4>
                            <p class="text-sm text-gray-600 mb-2">
                                See <code class="bg-gray-100 px-1 rounded">executeDirectTransfer()</code> - Line 537
                            </p>
                            <p class="text-xs text-gray-500">
                                Reduces Optimism fees by 90% using direct transfer instead of splitter contract
                            </p>
                        </div>

                        <div class="bg-white border-l-4 border-orange-500 p-4">
                            <h4 class="font-semibold mb-2">4. Real-time Payment Status UI</h4>
                            <p class="text-sm text-gray-600 mb-2">
                                See <code class="bg-gray-100 px-1 rounded">updateStep()</code> and payment modal - Line 932
                            </p>
                            <p class="text-xs text-gray-500">
                                Shows users exactly what's happening: approve tokens → execute payment → verify
                            </p>
                        </div>
                    </div>
                </section>

                <!-- API Reference -->
                <section id="api-reference">
                    <h2 class="text-3xl font-bold mb-6">API Reference</h2>

                    <div class="space-y-8">
                        <!-- Create Payment -->
                        <div class="border border-gray-200 rounded-lg p-6">
                            <div class="flex items-center mb-4">
                                <span class="bg-green-500 text-white px-3 py-1 rounded text-sm font-mono mr-3">POST</span>
                                <code class="text-lg font-mono">/api/payments/create</code>
                            </div>
                            <p class="text-gray-600 mb-4">Create a new payment request</p>

                            <h4 class="font-semibold mb-2">Request Body</h4>
                            <div class="code-block rounded-lg p-4 mb-4">
                                <pre class="text-gray-300 text-sm"><code>{
  "amount": "10.00",
  "currency": "USDT",
  "network": "polygon",
  "customerEmail": "user@example.com",
  "orderId": "ORDER_123",
  "metadata": {
    "items": [...],
    "platform": "YourApp"
  }
}</code></pre>
                            </div>

                            <h4 class="font-semibold mb-2">Headers Required</h4>
                            <div class="code-block rounded-lg p-4 mb-4">
                                <pre class="text-gray-300 text-sm"><code>X-API-Key: your_api_key
X-API-Secret: your_api_secret
Content-Type: application/json</code></pre>
                            </div>

                            <h4 class="font-semibold mb-2">Response</h4>
                            <div class="code-block rounded-lg p-4">
                                <pre class="text-gray-300 text-sm"><code>{
  "success": true,
  "payment": {
    "id": "uuid",
    "amount": "10.00",
    "contractAddress": "0x...",
    "merchantWallet": "0x...",
    "merchantPercentage": 9700
  }
}</code></pre>
                            </div>
                        </div>

                        <!-- Process Payment -->
                        <div class="border border-gray-200 rounded-lg p-6">
                            <div class="flex items-center mb-4">
                                <span class="bg-green-500 text-white px-3 py-1 rounded text-sm font-mono mr-3">POST</span>
                                <code class="text-lg font-mono">/api/payments/process</code>
                            </div>
                            <p class="text-gray-600 mb-4">Verify and complete a payment</p>

                            <h4 class="font-semibold mb-2">Request Body</h4>
                            <div class="code-block rounded-lg p-4 mb-4">
                                <pre class="text-gray-300 text-sm"><code>{
  "paymentId": "uuid",
  "transactionHash": "0xabc...",
  "network": "polygon",
  "senderAddress": "0x123...",
  "isDirectTransfer": false
}</code></pre>
                            </div>

                            <h4 class="font-semibold mb-2">Response</h4>
                            <div class="code-block rounded-lg p-4">
                                <pre class="text-gray-300 text-sm"><code>{
  "success": true,
  "message": "Payment processed successfully",
  "payment": {
    "status": "completed",
    "transactionHash": "0xabc..."
  }
}</code></pre>
                            </div>
                        </div>

                        <!-- Get Networks -->
                        <div class="border border-gray-200 rounded-lg p-6">
                            <div class="flex items-center mb-4">
                                <span class="bg-blue-500 text-white px-3 py-1 rounded text-sm font-mono mr-3">GET</span>
                                <code class="text-lg font-mono">/api/networks</code>
                            </div>
                            <p class="text-gray-600 mb-4">Get list of supported blockchain networks</p>

                            <h4 class="font-semibold mb-2">Response</h4>
                            <div class="code-block rounded-lg p-4">
                                <pre class="text-gray-300 text-sm"><code>{
  "success": true,
  "networks": [
    {
      "id": "1",
      "name": "Polygon",
      "shortName": "polygon",
      "chainId": "137",
      "isTestnet": false
    }
  ]
}</code></pre>
                            </div>
                        </div>

                        <!-- Get Tokens -->
                        <div class="border border-gray-200 rounded-lg p-6">
                            <div class="flex items-center mb-4">
                                <span class="bg-blue-500 text-white px-3 py-1 rounded text-sm font-mono mr-3">GET</span>
                                <code class="text-lg font-mono">/api/networks/:networkId/tokens</code>
                            </div>
                            <p class="text-gray-600 mb-4">Get supported tokens for a specific network</p>

                            <h4 class="font-semibold mb-2">Response</h4>
                            <div class="code-block rounded-lg p-4">
                                <pre class="text-gray-300 text-sm"><code>{
  "success": true,
  "tokens": [
    {
      "symbol": "USDT",
      "name": "Tether USD",
      "contractAddress": "0x...",
      "decimals": 6
    }
  ]
}</code></pre>
                            </div>
                        </div>

                        <!-- Get Payment Status (Public) -->
                        <div class="border border-gray-200 rounded-lg p-6">
                            <div class="flex items-center mb-4">
                                <span class="bg-blue-500 text-white px-3 py-1 rounded text-sm font-mono mr-3">GET</span>
                                <code class="text-lg font-mono">/api/payments/public/:paymentId</code>
                            </div>
                            <p class="text-gray-600 mb-4">Check payment status publicly (no authentication required)</p>

                            <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-4">
                                <p class="text-sm text-green-800">
                                    <i class="fas fa-unlock mr-2"></i>
                                    <strong>Public Endpoint:</strong> No API credentials needed. Perfect for polling payment status from frontend.
                                </p>
                            </div>

                            <h4 class="font-semibold mb-2">Response</h4>
                            <div class="code-block rounded-lg p-4">
                                <pre class="text-gray-300 text-sm"><code>{
  "success": true,
  "payment": {
    "id": "uuid",
    "amount": "10.00",
    "status": "completed",
    "Network": {
      "name": "Polygon",
      "chainId": "137"
    }
  }
}</code></pre>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h3 class="text-2xl font-bold mb-4">Ready to Accept Crypto Payments?</h3>
            <p class="text-gray-400 mb-6">Join hundreds of developers using Coinley to accept cryptocurrency</p>
            <a href="https://coinley.io/signup" target="_blank"
                class="inline-block bg-gradient-to-r from-blue-600 to-purple-600 text-white px-8 py-3 rounded-lg font-semibold hover:shadow-lg transition-all">
                Get API Credentials
            </a>
            <div class="mt-8 text-gray-400 text-sm">
                <p>&copy; 2025 Coinley. Built for developers who want to accept crypto without the complexity.</p>
            </div>
        </div>
    </footer>

    <script>
        // Smooth scrolling for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });
    </script>
</body>

</html>